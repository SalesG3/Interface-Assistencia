<section class="componente" id="andamento">
    <div class="titulo-componente" (mousedown)="moverComponente()">
        <span>Andamento OS:</span>
    </div>
    <div class="corpo-componente">
        <div class="ferramentas">
            <button class="voltar" (click)="voltarConsultando()" hidden><img src="../../../assets/voltar.svg">Voltar</button>
            <button class="fechar" (click)="router.fecharComponente(componente)"><img src="../../../assets/fechar.svg">Fechar</button>
            <div class="operadores" hidden>
                <button (click)="salvarRegistro(this.modoTela)"><img src="../../../assets/salvar+.svg">Salvar +</button>
                <button (click)="salvarRegistro('')"><img src="../../../assets/salvar+.svg">Salvar</button>
                <button (click)="cancelarRegistro()"><img src="../../../assets/fechar.svg">Cancelar</button>
            </div>
            <div class="navegacao">
                <span>{{modoTela}}</span>
                <div class="navegadores" hidden>
                    <button id="comeco" (click)="navegarRegistro('comeco')"><img src="../../../assets/comeco.svg"></button>
                    <button id="anterior" (click)="navegarRegistro('anterior')"><img src="../../../assets/anterior.svg"></button>
                    <button id="avancar" (click)="navegarRegistro('avancar')"><img src="../../../assets/avancar.svg"></button>
                    <button id="final" (click)="navegarRegistro('final')"><img src="../../../assets/final.svg"></button>
                </div>
            </div>
            <div class="crud">
                <button (click)="incluirRegistro()"><img src="../../../assets/incluir.svg">Incluir</button>
                <button (click)="detalhesRegistro('Alterando')"><img src="../../../assets/alterar.svg">Alterar</button>
                <button (click)="detalhesRegistro('Consultando')"><img src="../../../assets/consultar.svg">Consultar</button>
                <button (click)="excluirRegistro()"><img src="../../../assets/excluir.svg">Exluir</button>
                <button (click)="copiarRegistro()"><img src="../../../assets/copiar.svg">Copiar</button>
            </div>
        </div>
        <div class="grid-componente">
            <div class="grid-pesquisar">
                <img src="../../../assets/pesquisa.svg">
                <input type="text" id="pesquisa">
                <button (click)="pesquisarGrid()">Pesquisar</button>
                <span> | </span>
                <button>Filtrar</button>
            </div>
            <table class="grid-tabela">
                <thead>
                    <tr>
                        <th class="codigo">Nº OS:</th>
                        <th class="cliente">Cliente:</th>
                        <th class="dt_abertura">Abertura:</th>
                        <th class="status">Status:</th>
                    </tr>
                </thead>
                <tbody [innerHTML]="dadosTabela" (click)="trFocus($event)"></tbody>
            </table>
            <div class="rodape">
                <span>Total de Registros: {{countTabela}}</span>
            </div>
        </div>
        <div class="dados-componente" hidden>
            <div class="dados-registro">
                <span>Andamento</span>
                <label for="ordem_servico">Ordem Serv.:</label>
                <select #andaOrdem id="ordem_servico" (focus)="lookupSelect(andaOrdem)">
                    <option value="" hidden></option>
                </select>

                <label for="cliente">Cliente:</label>
                <input type="text" id="cliente" disabled>
                <br>
                <label for="dt_abertura">Abertura:</label>
                <input type="date" id="dt_abertura" disabled>
                
                <label for="cadastro">Cadastro:</label>
                <input type="text" id="cadastro" disabled>

                <label for="contato">Contato:</label>
                <input type="text" id="contato" disabled>
                <br><br>
                <section id="execucao" class="sub-componente">

                    <div class="sub-grid">
                        <table>
                            <thead>
                                <tr>
                                    <th class="sub-tipo">Tipo:</th>
                                    <th class="sub-executado">Serviço/Produto:</th>
                                    <th class="sub-quantidade">Quant.:</th>
                                    <th class="sub-desconto">Desconto:</th>
                                    <th class="sub-valor">Valor:</th>
                                </tr>
                            </thead>
                            <tbody [innerHTML]="innerTabela" (click)="trFocus($event)"></tbody>
                        </table>

                        <div class="sub-ferramentas">
                            <button (click)="comuns.alternarSubTela(componente, 'Incluindo', leitura)" disabled>Incluir</button>
                            <button disabled>Alterar</button>
                            <button disabled>Consultar</button>
                            <button disabled>Excluir</button>
                        </div>

                    </div>

                    <div class="sub-registro" hidden>
                        <div class="sub-dados">
                            <span>Produto/Serviço</span>
                            
                            <label for="sub-tipo">Tipo:</label>
                            <select #subTipo id="sub-tipo" >
                                <option value="" hidden></option>
                                <option value="Servico" data-descricao="Serviço">Serviço</option>
                                <option value="Produto" data-descricao="Produto">Produto</option>
                            </select>

                            <label for="sub-executado">Prod./Serv.:</label>
                            <select #subExecutado id="sub-executado" (focus)="selectExecutado()" data-descricao="nometeste">
                                <option value="" hidden></option>
                            </select>

                            <label for="sub-desconto">Desconto(%):</label>
                            <input #subDesconto type="text" id="sub-desconto" maxlength="10">
                            <br>
                            <label for="sub-unitBruto">Bruto Unit.:</label>
                            <input #andaVlrBruto type="text" id="sub-unitBruto" maxlength="10">

                            <label for="sub-unitDesconto">Desc. Unit.:</label>
                            <input #andaVlrDesconto type="text" id="sub-unitDesconto" maxlength="10" (input)="comuns.mascaraValor(andaVlrDesconto)">
                            
                            <label for="sub-unitLiquido">Total Unit.:</label>
                            <input #andaVlrLiquido type="text" id="sub-unitLiquido" maxlength="10" (input)="comuns.mascaraValor(andaVlrLiquido)">
                            
                            <label for="sub-quantidade">Quantidade:</label>
                            <input type="text" id="sub-quantidade" maxlength="10">
                            <br>
                            <label for="sub-totalBruto">Total Bruto:</label>
                            <input #andamentoTotalBruto type="text" id="sub-totalBruto" maxlength="10" (input)="comuns.mascaraValor(andamentoTotalBruto)">
                            
                            <label for="sub-totalDesconto">Total Desc.:</label>
                            <input #andamentoTotalDesconto type="text" id="sub-totalDesconto" maxlength="10" (input)="comuns.mascaraValor(andamentoTotalDesconto)">

                            <label for="sub-totalLiquido">Total Liq.:</label>
                            <input #andamentoTotalLiquido type="text" id="sub-totalLiquido" maxlength="10" (input)="comuns.mascaraValor(andamentoTotalLiquido)">

                        </div>
                        <div class="sub-operadores">
                            <button (click)="incluirSubRegistro()">Salvar</button>

                            <button (click)="comuns.alternarSubTela(componente, '')">Cancelar</button>
                        </div>
                    </div>

                </section>
                <br><br>
                <span class="mensagem">{{mensagem}}</span>
            </div>
        </div>

        <div class="loading" hidden>
            <div class="texto-loading">
                <img src="../../../assets/loading.gif">
                <span>Aguarde ...</span>
            </div>
        </div>

    </div>

    
    <dialog id="modalSucesso" class="modal">
        <div>
            <div class="titulo">
                <span>Sucesso!</span>
            </div>
            <div class="corpo">
                <img src="../../../assets/salvar+.svg">
                <span>{{textoModal}}</span><br>
                <button><img src="../../../assets/salvar.svg">OK!</button>
            </div>
        </div>
    </dialog>

    <dialog id="modalConfirmacao" class="modal">
        <div>
            <div class="titulo">
                <span>Confirmação:</span>
            </div>
            <div class="corpo">
                <img src="../../../assets/aviso.svg">
                <span>{{textoModal}}</span><br>
                <button id="nao">Não</button>
                <button id="sim">Sim</button>
            </div>
        </div>
    </dialog>

</section>
